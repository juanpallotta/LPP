####################################################
# CONFIGURATION FILE FOR LIDAR CONVERSION TOOL
####################################################

#############################################
# FORMAT:
# VAR = VALUE --> AT LEAST ONE SPACE BEFORE AND AFTER THE '=' !!!
#############################################


# PRODUCT DATA LEVEL OUTPUT --> P*D*L = L1/L2
PDL = L1
DB_SQL = YES
OUTPUT_FILE = YES 

# LABELS: PHOTON OR ADC
L1_SIGNAL_TYPE = ADC
L2_SIGNAL_TYPE = ADC

# EVENTS TO PROCESS: IF ALL ARE EQUAL, ALL EVENTS WILL BE ANALIZED, WHILE ITS ZENITHAL ANGLE IS LOWER THAN max_Zth_Angle
# THE EVENT NUMBER CORRESPOND TO THE CLUSTER EVENT (AFTER AVERAGING THE EVENTS)
# 50 54 44 36 16    6 5 4 3 2
evNum1 = 6
evNum2 = 6
evNum3 = 6
evNum4 = 6
evNum5 = 6

# MAXIMUN ZENITHAL ANGLE TO ANALIZE [ยบ]
maxZthAngle = 50
deltaZenithAvg = 3

# BASIC LIDAR PARAMETERS
# MOSTAFA 16 bines - 3.75 m/b = 60 m    LPower.h (25) : static constexpr int      licel_trigger_delay=0 ; // 16 [bins]
# 160 180 100   Pablo=172  140 150
# 142m(40 bines) -> FIRST POSITIVE PEAK
# 30m -> FIRST NEGATIVE PEAK -> THIS IS THE REAL LASER. THE OTHER PEAKS HAS A PERIODIC DUTY OF 40 BINS APPROXIMATELY. ALSO WITH THIS VALUE (30 m) THE BEST RAYLEIGHT FIT IS OBTAINED.
# rOffset = 30
indxOffset = 5
nBinsBkg = 1000

# binInitSig@500 = 133 bines
# 3.75 -> 500 26000     300  7505m=AURELIO'S PAPER CLOUD DETECTION ALGORITHM
# 500 SHORT RANGE   800 LONG RANGE
dr = 3.75
# rInitSig = 800
rInitSig = 500
rEndSig = 12000
nBinsRaw = 16000

nBinsFactor = 1.0
# BACKGROUND CORRECTION METHOD = FIT/MEAN 
BkgCorrMethod = FIT 
# FITTING WINDOWS FOR FindMolecularRange [m]. dr*Fit DEFAULT VALUE 
drFit = 5000

# CLOUD DETECTION PARAMETERS
AVG_CLOUD_DETECTION = 55
stepScanCloud = 1 
nScanMax = 5000
errFactor = 2.0
thresholdFactor = 5.0
CLOUD_MIN_THICK = 5
RANGE_ADC_PHO_GLUING = 3000

errScanCheckFactor = 1.0
errCloudCheckFactor = 0.0
# CLOUDS_BIN_GAP = 50
DELTA_RANGE_LIM_BINS = 100

ifODcut = NO
OD_cut = 0.0513

# CheckLidarDataBaseIntegrity(...)
meanAmeanBsize = 300
deltaUnderShoot = 500
avg_check_undershoot = 101

# WINDOWS SIZE TO COMPUTE THE MEAN AVERAGE [BINS] 50 --> MUST BE ODD NUMBER
spamAvgWin = 51

# TAM METHOD    TAM*height*Start -> ASL
thetaRef = 0
thetaDiff = 45
TAMheightStart = 9000
TAMheightStep = 500
TAMStepNumber = 5
dNFitTAM = 500

# FERNALD INVERSION PARAMETER
LR = 30 : 50 : 80 

# FERNALD AVERAGING
avg_Points_Fernald = 31

# RAYLEIGHT-FIT TYPE METHOD: FACTOR / RMS
Rayleight_Fit_TYPE = FACTOR

# --> sig*Type*Inversion*Used = Fil / Raw (DEFAULT)
# sigTypeInversionUsed = Raw

# --> height*Ref*Inversion = ABOVE SEA LEVEL  --> IF <0 THE VALUE IS OBTAINED AUTOMATICALLY
heightRef_Inversion_ASL = 6000

# ERROR CALCULUS
nSigSetErr = 10
LR_init = 20
LR_end = 100

# HEIGH ASL TO CALCULATE VAOD ASL [m]
VAOD_HEIGH0 = 2000
VAOD_HEIGH1 = 2500
VAOD_HEIGH2 = 3000
VAOD_HEIGH3 = 6000
VAOD_HEIGH_TOT = 10000

# SITES COORDINATES [m]
LL_ASL = 1416.4
LL_LAT = 0.0
LL_LON = 0.0
LM_ASL = 1416.4
LM_LAT = 0.0
LM_LON = 0.0
LA_ASL = 1476.7
LA_LAT = 0.0
LA_LON = 0.0
CH_ASL = 1712.3
CH_LAT = 0.0
CH_LON = 0.0

# LIDAR ZONES CONVENTION FOR DB (I DON'T NEED THIS, ONLY FOR LAURA WHEN PUT THE DATA IN THE AUGER DB)
CH_ZONE = 1
LL_ZONE = 2
LM_ZONE = 3
LA_ZONE = 4

# CHANNEL USED FOR ANALISYS
# used_channel = long_range_2

# CHANNELS CONFIGURATIONS VERSUS SITE AND YEARS

# COIHUECO -------------------------------------------------------------------

# 2005 -> CH
ch.2005.used_channel = 1

# 2006 -> long_range_1
ch.2006.used_channel = 1

# 2007 -> long_range_0
ch.2007.used_channel = 0

# 2008 -> CH1
ch.2008.used_channel = 1

# 2009 -> CH1 --> 0
ch.2009.used_channel = 0

# 2010 -> long_range_1
ch.2010.used_channel = 1

# 2011 -> long_range_2
ch.2011.used_channel = 2

# 2012 -> long_range_2
ch.2012.used_channel = 2

# 2013 -> CH0: BAD BOTH SIGNALS
# 2013 -> CH1: BAD PHOTONCOUNTING SIGNALS
# 2013 -> CH2: LOOKS GOOD (SHORT RANGE??)
ch.2013.used_channel = 2

# 2014 ->CH2
ch.2014.used_channel = 2

# 2015 -> long_range_1    ch1:BAD

ch.2015.used_channel = X

# 2016 -> long_range_1
ch.2016.used_channel = 1

# 2017 -> long_range_1
ch.2017.used_channel = 1

# 2018 -> long_range_1
ch.2018.used_channel = 1

# 2019 -> long_range_1
ch.2019.used_channel = 1

# 2021 -> long_range_2
ch.2021.used_channel = 2
